var KObservableData=function(){var G=function(){return function(D,v,E){function l(a,b,c,e,C,d){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=b;this.arguments=d;this.type=c;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=e;this.oldValue=C}function m(a,b,c,e){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=
!0};this.type=a;this.key=b;this.event=c;this.args=e}function r(a,b){var c=t[b];return function(b,C){var d=new l(this,h(c)?b:"",a,h(c)?this[b]:"",h(c)?this[b]:"",arguments),d=new m(a,h(c)?b:"",d,arguments),k;!0!==g(d)&&(h(c)?(void 0===c[d.key]&&(c[d.key]=[]),k=c[d.key],k.push(d.args[1])):w(c)&&(void 0===c["*"]&&(c["*"]=[]),k=d.args[1]&&"*"===d.args[1]?c["*"]:c,k.push(d.args[0])));return this}}function x(a,b){var c=t[b];return function(b,C){var d=new l(this,b,a,this[b],this[b],arguments),d=new m(a,
b,d,arguments),k;if(!0!==g(d))if(h(c)){if(k=c[d.key])for(var z=0,u=k.length;z<u;z++)if(k[z].toString()===d.args[1].toString()){k.splice(z,1);break}}else if(w(c))for(void 0===c["*"]&&(c["*"]=[]),k=d.args[1]&&"*"===d.args[1]?c["*"]:c,z=0,u=k.length;z<u;z++)if(k[z].toString()===d.args[0].toString()){k.splice(z,1);break}return this}}function h(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function w(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Array.toString()}
function A(a,b,c){return{get:function(){return a[b]},set:function(c){a[b]=c},enumerable:c.enumerable,configurable:c.configurable}}function d(a,b,c){return{value:a,writable:!!b,enumerable:!1,configurable:!!c}}function B(a,b){var c=a,e=a,d=function(a,b){e=c;c=a;b.listener="__kbupdatelisteners";b.type="update";q(b)};return{get:function(){return c},set:function(a,k){var g=new l(this,b,"set",a,c,arguments,"__kblisteners");k?d(a,g):!0!==q(g)&&(d(a,g),this.callSubscribers(b,c,e))},configurable:!0,enumerable:!0}}
var t=[],f={},y={splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},g=function(a){for(var b=0,c=y[a.type],e=c.length;b!==
e&&(c[b](a),!a._stopPropogration);b++);return a._preventDefault},n=function(a,b){if(!b._stopPropogration&&a)for(var c=0,e=a.length;c!==e&&(a[c](b),!b._stopPropogration);c++);},q=function(a){var b=a.local[a.listener];h(b)?(n(b[a.key],a),"__kblisteners"===a.listener?(n(b["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",n(a.local[a.listener][a.key],a),n(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(n(b["*"],a),a.fromListener="__kbupdatelisteners",a.listener=
"__kbparentupdatelisteners",n(a.local[a.listener][a.key],a),n(a.local[a.listener]["*"],a))):w(b)&&(n(b,a),n(b["*"],a));return a._preventDefault};Object.defineProperties(t,{__kbname:d(D||"",!0,!0),__kbref:d(v?v.__kbref||v:t,!0,!0),__kbscopeString:d(E||"",!0,!0),__kbImmediateParent:d(v||null,!0,!0),splice:d(function(a,b,c){var e=new l(this,a,"splice",this[a],void 0,arguments,"__kbdatadeletelisteners"),d=new m("splice",a,e,arguments);if(!0!==g(d)){var p=[],k=w(d.args[2]),z=void 0!==d.args[2]?k?d.args[2].length:
1:0,u=0;if(0!==b&&void 0!==this[d.key-1+d.args[1]]){for(var f=0,n=d.args[1];f<n;f++)if(u=d.key+f,e.key=u,e.type="remove",e.value=this[u],!0!==q(e)){p.push(this[u-p.length]);for(var h=d.key,r=this.length-1;h<r;h++)this[h]=this[h+1]}else--d.args[1];this.length-=d.args[1]}if(0!==z)for(k||(d.args[2]=[d.args[2]]),f=0,n=z;f<n;f++)if(u=d.key+f,e.key=u,e.type="add",e.listener="__kbdatacreatelisteners",e.value=d.args[2][f],!0!==q(e)){h=this.length;for(r=u;h>r;h--)void 0===this[h]?Object.defineProperty(this,
h,B.call(this,this[h-1],h)):this[h]=this[h-1];this[u]=d.args[2][f]}d.type="postsplice";g(d)}return p}),push:d(function(a){var b=new l(this,this.length,"push",a,void 0,arguments,"__kbdatacreatelisteners"),c=new m("push",this.length,b,arguments);!0!==g(c)&&(b.type="add",b.value=c.args[0],b.key=c.key,!0!==q(b)&&(Object.defineProperty(this,c.key,B.call(this,c.args[0],c.key)),c.type="postpush",g(c)));return this.length}),pop:d(function(){var a=new l(this,this.length-1,"pop",this[this.length-1],void 0,
arguments,"__kbdatadeletelisteners"),b=new m("pop",this.length-1,a,arguments);if(!0!==g(b)){var c=this[this.length-1];a.type="remove";if(!0!==q(a))return--this.length,b.type="postpop",g(b),c}return null}),shift:d(function(){var a=new l(this,0,"shift",this[0],void 0,arguments,"__kbdatadeletelisteners"),b=new m("shift",0,a,arguments);if(!0!==g(b)){var c=this[b.key];a.type="remove";a.key=b.key;if(!0!==q(a)){for(var a=b.key,e=this.length-1;a<e;a++)this[a]=this[a+1];--this.length;b.type="postshift";g(b);
return c}}return null}),unshift:d(function(){var a=new l(this,0,"unshift",this[0],void 0,arguments,"__kbdatacreatelisteners"),b=new m("unshift",0,a,arguments);if(!0!==g(b)){for(var c=Array.prototype.slice.call(b.args),e=0,d=c.length;e<d;e++)a.key=e,a.type="add",a.value=c[e],!0===q(a)&&c.splice(e,1);if(0!==c.length){e=this.length-1+c.length;for(d=c.length;-1!==e;e--)e<d?this[e]=c[e]:void 0!==Object.getOwnPropertyDescriptor(this,e).value?Object.defineProperty(this,e,B.call(this,this[e-c.length],e)):
this[e]=this[e-c.length];b.type="postunshift";g(b)}}return this.length}),fill:d(function(a,b,c){var e=void 0!==b?Math.max(0,b):0,d=new l(this,e,"fill",a,this[e],arguments,"__kbdatalisteners"),e=new m("fill",e,d,arguments);if(!0!==g(e)){for(d=e.key;d<e.args[2];d++)this[d]=e.args[0];e.type="postfill";g(e)}return this}),reverse:d(function(){var a=new l(this,0,"reverse",value,this[_start],arguments,"__kbdatalisteners"),a=new m("reverse",0,a,arguments);if(!0!==g(a)){for(var b=this.slice().reverse(),c=
0,e=this.length;c<e;c++)this[c]=b[c];a.type="postreverse";g(a)}return this}),sort:d(function(){var a=new l(this,0,"sort",value,this[_start],arguments,"__kbdatalisteners"),a=new m("sort",0,a,arguments);if(!0!==g(a)){for(var b=this.slice(),b=b.sort.apply(b,arguments),c=0,e=this.length;c<e;c++)this[c]=b[c];a.type="postsort";g(a)}return this}),add:d(function(a,b){var c=new l(this,a,"add",b,void 0,arguments,"__kbdatacreatelisteners"),e=new m("add",a,c,arguments);void 0===a?this.push(b):!0!==g(e)&&(void 0===
this[e.key]?!0!==q(c)&&(Object.defineProperty(this,e.key,B.call(this,e.args[1],e.key)),e.type="postadd",g(e)):console.error("Your attempting to add the index: ",e.key," that already exists on",this,"try using set or direct set instead"));return this}),prototype:d(function(a,b){void 0===this[a]?Object.defineProperty(this.__proto__,a,d(b,!0,!0)):console.error("Your attempting to add your prototype with the prop: ",a," that already exists");return this}),addPointer:d(function(a,b,c){var e=new l(this,
c||b,"add",a[b],void 0,arguments,"__kbdatacreatelisteners"),d=new m("add",c||b,e,arguments);!0!==g(d)&&!0!==q(e)&&(e=Object.getOwnPropertyDescriptor(a,b),Object.defineProperty(this,d.key,A(a,b,e)),d.type="postadd",g(d));return this}),set:d(function(a,b,c){var e=new l(this,a,"set",b,this[a],arguments,"__kblisteners"),d=new m("set",a,e,arguments);void 0===this[a]?this.add(a,b):!0!==g(d)&&(e.key=d.key,e.value=d.args[1],!0!==q(e)&&(void 0===Object.getOwnPropertyDescriptor(this,d.key).value?Object.getOwnPropertyDescriptor(this,
d.key).set(d.args[1],c):Object.defineProperty(this,d.key,B.call(this,d.args[1],d.key)),d.type="postset",g(d)));return this}),remove:d(function(a,b){var c=new l(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),c=new m("remove",a,c,arguments);if(!0!==g(c)){if(void 0===this[c.key])return console.error("Your attempting to remove the index: ",c.key," that does not exist on ",this),this;this.splice(c.key,c.args[1])}return this}),stringify:d(function(){var a=[];return JSON.stringify(this,
function(b,c){if(w(c)||h(c)){if(-1!==a.indexOf(c))return;a.push(c)}return c})}),callSubscribers:d(function(a,b,c){if(void 0!==f[a]){c=0;for(var d=f[a].length;c<d;c++)f[a][c](b)}return this}),subscribe:d(function(a,b){void 0===f[a]&&(f[a]=[]);f[a].push(b);return this}),unsubscribe:d(function(a,b){if(void 0!==f[a]){var c=0,d=f[a].length;a:for(;c<d;c++)if(f[a][c].toString()===b.toString()){f[a].splice(c,1);break a}}return this}),__kblisteners:d({}),__kbupdatelisteners:d({}),__kbparentlisteners:d({}),
__kbparentupdatelisteners:d({}),__kbdatacreatelisteners:d([]),__kbdatadeletelisteners:d([]),addActionListener:d(function(a,b){-1!==Object.keys(y).indexOf(a)?y[a].push(b):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:d(function(a,b){if(-1!==Object.keys(y).indexOf(a))for(var c=0,d=y[a],C=d.length;c!==C;c++){if(d[c].toString()===b.toString()){d.splice(c,1);break}}else console.error("There is no action listener by the name: ",a);return this})});Object.defineProperties(t,
{addDataListener:d(r("__kblisteners")),removeDataListener:d(x("__kblisteners")),addDataUpdateListener:d(r("__kbupdatelisteners")),removeDataUpdateListener:d(x("__kbupdatelisteners")),addDataCreateListener:d(r("__kbdatacreatelisteners")),removeDataCreateListener:d(x("__kbdatacreatelisteners")),addDataRemoveListener:d(r("__kbdatadeletelisteners")),removeDataRemoveListener:d(x("__kbdatadeletelisteners"))});return t}}(),H=function(){return function(D,v,E){function l(a,b,c,d,C,g,k){this.stopPropogation=
function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=b;this.arguments=g;this.type=c;this.listener=k;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=d;this.oldValue=C}function m(a,b,c,d){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.type=a;this.key=b;this.event=c;this.args=d}function r(a,b){var c=
t[b];return function(b,d){var p=new l(this,h(c)?b:"",a,h(c)?this[b]:"",h(c)?this[b]:"",arguments),p=new m(a,h(c)?b:"",p,arguments),k;!0!==g(p)&&(h(c)?(void 0===c[p.key]&&(c[p.key]=[]),k=c[p.key],k.push(p.args[1])):w(c)&&(void 0===c["*"]&&(c["*"]=[]),k=p.args[1]&&"*"===p.args[1]?c["*"]:c,k.push(p.args[0])));return this}}function x(a,b){var c=t[b];return function(b,d){var p=new l(this,b,a,this[b],this[b],arguments),p=new m(a,b,p,arguments),k;if(!0!==g(p))if(h(c)){if(k=c[p.key])for(var f=0,u=k.length;f<
u;f++)if(k[f].toString()===p.args[1].toString()){k.splice(f,1);break}}else if(w(c))for(void 0===c["*"]&&(c["*"]=[]),k=p.args[1]&&"*"===p.args[1]?c["*"]:c,f=0,u=k.length;f<u;f++)if(k[f].toString()===p.args[0].toString()){k.splice(f,1);break}return this}}function h(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Object.toString()}function w(a){return"object"===typeof a&&!!a&&a.constructor.toString()===Array.toString()}function A(a,b,c){return{get:function(){return a[b]},set:function(c){a[b]=
c},enumerable:c.enumerable,configurable:c.configurable}}function d(a,b,c){return{value:a,writable:!!b,enumerable:!1,configurable:!!c}}function B(a,b){var c=a,d=a,C=function(a,b){d=c;c=a;b.listener="__kbupdatelisteners";b.type="update";q(b)};return{get:function(){return c},set:function(a,g){var f=new l(this,b,"set",a,c,arguments,"__kblisteners");g?C(a,f):!0!==q(f)&&(C(a,f),this.callSubscribers(b,c,d))},configurable:!0,enumerable:!0}}var t={},f={},y={add:[],postadd:[],set:[],postset:[],remove:[],postremove:[],
addDataListener:[],removeDataListener:[],addDataUpdateListener:[],removeDataUpdateListener:[],addDataCreateListener:[],removeDataCreateListener:[],addDataRemoveListener:[],removeDataRemoveListener:[]},g=function(a){for(var b=0,c=y[a.type],d=c.length;b!==d&&(c[b](a),!a._stopPropogration);b++);return a._preventDefault},n=function(a,b){if(!b._stopPropogration&&a)for(var c=0,d=a.length;c!==d&&(a[c](b),!b._stopPropogration);c++);},q=function(a){var b=a.local[a.listener];h(b)?(n(b[a.key],a),"__kblisteners"===
a.listener?(n(b["*"],a),a.fromListener="__kblisteners",a.listener="__kbparentlisteners",n(a.local[a.listener][a.key],a),n(a.local[a.listener]["*"],a)):"__kbupdatelisteners"===a.listener&&(n(b["*"],a),a.fromListener="__kbupdatelisteners",a.listener="__kbparentupdatelisteners",n(a.local[a.listener][a.key],a),n(a.local[a.listener]["*"],a))):w(b)&&(n(b,a),n(b["*"],a));return a._preventDefault};Object.defineProperties(t,{__kbname:d(D||"",!0,!0),__kbref:d(v?v.__kbref||v:t,!0,!0),__kbscopeString:d(E||"",
!0,!0),__kbImmediateParent:d(v||null,!0,!0),add:d(function(a,b){var c=new l(this,a,"add",b,void 0,arguments,"__kbdatacreatelisteners"),d=new m("add",a,c,arguments);!0!==g(d)&&(void 0===this[d.key]?!0!==q(c)&&(Object.defineProperty(this,d.key,B.call(this,d.args[1],d.key)),d.type="postadd",g(d)):console.error("Your attempting to add the property: ",d.key," that already exists on",this,"try using set or direct set instead"));return this}),addPointer:d(function(a,b,c){var d=new l(this,c||b,"add",a[b],
void 0,arguments,"__kbdatacreatelisteners"),f=new m("add",c||b,d,arguments);!0!==g(f)&&!0!==q(d)&&(d=Object.getOwnPropertyDescriptor(a,b),Object.defineProperty(this,f.key,A(a,b,d)),f.type="postadd",g(f));return this}),prototype:d(function(a,b){void 0===this[a]?Object.defineProperty(this.__proto__,a,d(b,!0,!0)):console.error("Your attempting to add the your method with the prop: ",a," that already exists");return this}),set:d(function(a,b,c){var d=new l(this,a,"set",b,this[a],arguments,"__kblisteners"),
f=new m("set",a,d,arguments);void 0===this[a]?this.add(f.key,f.args[1]):!0!==g(f)&&(d.key=f.key,d.value=f.args[1],!0!==q(d)&&(void 0===Object.getOwnPropertyDescriptor(this,f.key).value?Object.getOwnPropertyDescriptor(this,f.key).set.call(this,f.args[1],c):Object.defineProperty(this,f.key,B.call(this,f.args[1],f.key)),f.type="postset",g(f)));return this}),remove:d(function(a){var b=new l(this,a,"remove",this[a],this[a],arguments,"__kbdatadeletelisteners"),c=new m("remove",a,b,arguments);if(!0!==g(c)){if(void 0===
this[c.key])return console.error("Your attempting to remove the property: ",c.key," that does not exist on ",this),this;!0!==q(b)&&(Object.defineProperty(this,c.key,{value:null,writable:!0,enumerable:!0,configurable:!0}),c.type="postremove",g(c))}return this}),stringify:d(function(){var a=[];return JSON.stringify(this,function(b,c){if(w(c)||h(c)){if(-1!==a.indexOf(c))return;a.push(c)}return c})}),callSubscribers:d(function(a,b,c){if(void 0!==f[a]){c=0;for(var d=f[a].length;c<d;c++)f[a][c](b)}return this}),
subscribe:d(function(a,b){void 0===f[a]&&(f[a]=[]);f[a].push(b);return this}),unsubscribe:d(function(a,b){if(void 0!==f[a]){var c=0,d=f[a].length;a:for(;c<d;c++)if(f[a][c].toString()===b.toString()){f[a].splice(c,1);break a}}return this}),__kblisteners:d({}),__kbupdatelisteners:d({}),__kbparentlisteners:d({}),__kbparentupdatelisteners:d({}),__kbdatacreatelisteners:d([]),__kbdatadeletelisteners:d([]),addActionListener:d(function(a,b){-1!==Object.keys(y).indexOf(a)?y[a].push(b):console.error("There is no action listener by the name: ",
a);return this}),removeActionListener:d(function(a,b){if(-1!==Object.keys(y).indexOf(a))for(var c=0,d=y[a],f=d.length;c!==f;c++){if(d[c].toString()===b.toString()){d.splice(c,1);break}}else console.error("There is no action listener by the name: ",a);return this}),onadd:d(function(){},!0),onremove:d(function(){},!0),onset:d(function(){},!0),onupdate:d(function(){},!0)});Object.defineProperties(t,{addDataListener:d(r("addDataListener","__kblisteners")),removeDataListener:d(x("removeDataListener","__kblisteners")),
addDataUpdateListener:d(r("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:d(x("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:d(r("addDataCreateListener","__kbdatacreatelisteners")),removeDataCreateListener:d(x("removeDataCreateListener","__kbdatacreatelisteners")),addDataRemoveListener:d(r("addDataRemoveListener","__kbdatadeletelisteners")),removeDataRemoveListener:d(x("removeDataRemoveListener","__kbdatadeletelisteners"))});return t}}(),F=function(D,
v){return function(E,l){function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function r(a){return"[object Object]"===Object.prototype.toString.call(a)}function x(a,b){return b?a[b]?void 0===Object.getOwnPropertyDescriptor(a,b).value:!1:void 0!==a.__kbname}function h(a){return a.split(".").filter(function(a){return 0!==a.length})}function w(a,b){function c(a){b.splice(0,1);return 0===b.length?a:a[b[0]]?c(a[b[0]]):a}return(b=h(b))&&1!==b.length?c(a[b[0]]):b&&b.length?a[b[0]]:a}function A(a){var b=
a.key.split(".");if(1===b.length&&"*"!==a.key)return!1;"*"!==a.key?(a.preventDefault(),w(a.event.local,b.slice(0,b.length-1).join("."))[a.type](b[b.length-1],a.args[1])):(a.preventDefault(),-1!==a.type.toLowerCase().indexOf("update")?a.event.local.addChildDataUpdateListener("*",a.args[1]):a.event.local.addChildDataListener("*",a.args[1]))}function d(a){void 0===a.parseData&&a.prototype("parseData",n);void 0===a.isArray&&a.prototype("isArray",m);void 0===a.isObject&&a.prototype("isObject",r);void 0===
a.isObservable&&a.prototype("isObservable",x);void 0===a.updateName&&a.prototype("updateName",f);void 0===a.getScopeByScopeString&&a.prototype("getScopeByScopeString",w);void 0===a.addChildDataListener&&a.prototype("addChildDataListener",B("__kbparentlisteners"));void 0===a.removeChildDataListener&&a.prototype("removeChildDataListener",t("__kbparentlisteners"));void 0===a.addChildDataUpdateListener&&a.prototype("addChildDataUpdateListener",B("__kbparentupdatelisteners"));void 0===a.removeChildDataUpdateListener&&
a.prototype("removeChildDataUpdateListener",t("__kbparentupdatelisteners"));return a.addActionListener("add",y).addActionListener("set",g).addActionListener("addDataListener",A).addActionListener("addDataUpdateListener",A).addActionListener("addDataCreateListener",A).addActionListener("addDataRemoveListener",A).addActionListener("removeDataListener",A).addActionListener("removeDataUpdateListener",A).addActionListener("removeDataCreateListener",A).addActionListener("removeDataRemoveListener",A)}function B(a){return function(b,
c){function d(b,c,f){var g=Object.keys(b).filter(function(a){return r(b[a])||m(b[a])});void 0===b[a][c]&&(b[a][c]=[]);b[a][c].push(f);for(var h=0,l=g.length;h<l;h++)d(objar[g[h]],c,f)}d(this,b,c);return this}}function t(a){return function(b,c){function d(b,c,f){var g=Object.keys(b).filter(function(a){return r(b[a])||m(b[a])}),h=0,l=b[a][c].length;a:for(;h<l;h++)if(b[a][c][h].toString()===f.toString()){b[a][c].splice(h,1);break a}h=0;for(l=g.length;h<l;h++)d(b[g[h]],c,f)}d(this,b,c);return this}}function f(a){"string"===
typeof a&&(q.name=a);return this}function y(a){if((r(a.args[1])||m(a.args[1]))&&!x(a.args[1])){a.preventDefault();var b=a.event.local,c=b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+a.key,c=(r(a.args[1])?v:D)(b.__kbname,b,c);b.add(a.key,c);d(b[a.key]).parseData(a.args[1])}}function g(a){if((r(a.args[1])||m(a.args[1]))&&!x(a.args[1])){a.preventDefault();var b=a.event.local,c=b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+a.key,c=(r(a.args[1])?v:D)(b.__kbname,b,c);b.set(a.key,c);
d(b[a.key]).parseData(a.args[1])}}function n(a){for(var b=0,c=Object.keys(a),d=c.length;b<d;b++)this.set(c[b],a[c[b]]);return this}var q={name:E};_data=("string"===typeof l&&"array"===l.toLowercase()?D:v)(q.name,void 0,"").addPointer(q,"name","__kbname");d(_data);return _data}}(G,H);window.define&&window.require?define([],function(){return F}):window.module&&(module.exports=F);return F}();
