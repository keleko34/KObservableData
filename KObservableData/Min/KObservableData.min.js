(function(){var E=function(){return function(C,t,x){function m(a,e,b,d,c,q){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=e;this.arguments=q;this.type=b;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=d;this.oldValue=c}function p(a){var e=this[a];return function(a,b){e[a]=b;return this}}function n(a){var e=this[a];return function(a,b){void 0!==
b&&(e=e[a]);for(var d=0,q=e.length;d<q;d++)if(e[d].toString()===b.toString()){e.splice(d,1);break}return this}}function v(a,e,b){return{get:function(){return a[e]},set:function(b){a[e]=b},enumerable:b.enumerable,configurable:b.configurable}}function c(a,e,b){return{value:a,writable:!!e,enumerable:!1,configurable:!!b}}function u(a,b){var z=a,d=a,c=y,q=A;return{get:function(){return z},set:function(a,r){!0!==c(this,b,a,z)&&(d=z,z=a,q(this,b,z,d),r||this.callSubscribers(b,z,d))},configurable:!0,enumerable:!0}}
var h=[],g={splice:[],push:[],pop:[],shift:[],unshift:[],fill:[],reverse:[],sort:[],add:[],set:[],remove:[]},f=function(a,b,d,c,f,q){a=new m(a,b,d,c,f,q);b=0;d=g[d];for(c=d.length;b!==c&&(d[b](a),!a._stopPropogration);b++);return a._preventDefault},k={},y=function(a,b,d,c,g){a=new m(a,b,d,c,g);h.onset(a);return a._preventDefault},A=function(a,b,d,c,g){a=new m(a,b,d,c,g);h.onupdate(a);return a._preventDefault},b=function(a,b,d,c,g){a=new m(a,b,d,c,g);h.onadd(a);return a._preventDefault},d=function(a,
b,d,c,g){a=new m(a,b,d,c,g);h.onremove(a);return a._preventDefault};h.onadd=function(a){};h.onremove=function(a){};h.onset=function(a){};h.onupdate=function(a){};h.onobject=function(a){return a};Object.defineProperties(h,{__kbname:c(C||"",!0,!0),__kbref:c(t?t.__kbref||t:h,!0,!0),__kbscopeString:c(x||"",!0,!0),__kbImmediateParent:c(t||null,!0,!0),splice:c(function(a,e,c){var g=[],h="[object Array]"===Object.prototype.toString.call(c),q=void 0!==c?h?c.length:1:0,l=0;if(0!==e&&void 0!==this[a-1+e]){for(var r=
0,D=e;r<D;r++)if(l=a+r,!0!==d(this,l,"remove",this[l])){g.push(this[l-g.length]);for(var w=a,k=this.length-1;w<k;w++)this[w]=this[w+1]}else--e;this.length-=e}if(0!==q)for(h||(c=[c]),r=0,D=q;r<D;r++)if(l=a+r,!0!==b(this,l,"add",c[r],this[l])){w=this.length;for(k=l;w>k;w--)void 0===this[w]?Object.defineProperty(this,w,u.call(this,this[w-1],w)):this[w]=this[w-1];this[l]=c[r]}f(this,a,"splice",c,void 0,arguments);return g}),push:c(function(a){!0!==b(this,this.length,"add",a)&&(Object.defineProperty(this,
this.length,u.call(this,a,this.length)),f(this,this.length-1,"push",a,void 0,arguments));return this.length}),pop:c(function(){var a=this[this.length-1];return!0!==d(this,this.length-1,"remove",a)?(--this.length,f(this,this.length,"pop",a,void 0,arguments),a):null}),shift:c(function(){var a=this[0];if(!0!==d(this,0,"remove",a)){for(var b=0,c=this.length-1;b<c;b++)this[b]=this[b+1];--this.length;f(this,0,"shift",a,void 0,arguments);return a}return null}),unshift:c(function(){for(var a=Array.prototype.slice.call(arguments),
e=0,d=a.length;e<d;e++)!0===b(this,e,"add",a[e])&&a.splice(e,1);if(0!==a.length){e=this.length-1+a.length;for(d=a.length;-1!==e;e--)e<d?this[e]=a[e]:void 0!==Object.getOwnPropertyDescriptor(this,e).value?Object.defineProperty(this,e,u.call(this,this[e-a.length],e)):this[e]=this[e-a.length];f(this,0,"unshift",a,void 0,arguments)}return this.length}),fill:c(function(a,b,d){for(var c=void 0!==d&&d<=this.length?Math.min(this.length,Math.max(0,d)):this.length,g=void 0!==b?Math.max(0,b):0;g<c;g++)this[g]=
a;f(this,0,"fill",a,void 0,arguments);return this}),reverse:c(function(){for(var a=this.slice().reverse(),b=0,d=this.length;b<d;b++)this[b]=a[b];f(this,0,"reverse",a,void 0,arguments);return this}),sort:c(function(){for(var a=this.slice(),a=a.sort.apply(a,arguments),b=0,d=this.length;b<d;b++)this[b]=a[b];f(this,0,"sort",a,void 0,arguments);return this}),add:c(function(a,e){void 0===e?this.push(a):void 0===this[e]?!0!==b(this,e,"add",a)&&(Object.defineProperty(this,e,u.call(this,a,e)),f(this,e,"add",
a,void 0,arguments)):console.error("Your attempting to add the index: ",e," that already exists on",this,"try using set or direct set instead");return this}),prototype:c(function(a,b){void 0===this[a]?Object.defineProperty(this.__proto__,a,c(b,!0,!0)):console.error("Your attempting to add your prototype with the prop: ",a," that already exists");return this}),addPointer:c(function(a,e,d){if(!0!==b(this,d||e,a[e])){var c=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(this,d||e,v(a,e,c));
f(this,d||e,"add",a[e],void 0,arguments)}return this}),set:c(function(a,b,d){void 0===this[a]?this.add(b,a):(void 0===Object.getOwnPropertyDescriptor(this,a).value?Object.getOwnPropertyDescriptor(this,a).set(b,d):Object.defineProperty(this,a,u.call(this,b,a)),f(this,a,"set",b,void 0,arguments));return this}),remove:c(function(a,b){if(void 0===this[a])return console.error("Your attempting to remove the index: ",a," that does not exist on ",this),this;var d=this[a];this.splice(a,b);f(this,a,"remove",
d,void 0,arguments);return this}),stringify:c(function(){var a=[];return JSON.stringify(this,function(b,d){if("[object Array]"===Object.prototype.toString.call(d)||"object"===typeof d&&d&&"[object Object]"===Object.prototype.toString.call(d)){if(-1!==a.indexOf(d))return;a.push(d)}return d})}),callSubscribers:c(function(a,b,d){if(void 0!==k[a]){b=new m(this,a,"subscriber",b,d);d=0;for(var c=k[a].length;d<c&&(k[a][d](b),!b._stopPropogration);d++);}return this}),subscribe:c(function(a,b){void 0===k[a]&&
(k[a]=[]);k[a].push(b);return this}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbdatacreatelisteners:c([]),__kbdatadeletelisteners:c([]),addActionListener:c(function(a,b){-1!==Object.keys(g).indexOf(a)?g[a].push(b):console.error("There is no action listener by the name: ",a);return this}),removeActionListener:c(function(a,b){if(-1!==Object.keys(g).indexOf(a))for(var d=0,c=g[a],f=c.length;d!==f;d++){if(c[d].toString()===b.toString()){c.splice(d,
1);break}}else console.error("There is no action listener by the name: ",a);return this})});Object.defineProperties(h,{addDataListener:c(p("__kblisteners")),removeDataListener:c(n("__kblisteners")),addDataUpdateListener:c(p("__kbupdatelisteners")),removeDataUpdateListener:c(n("__kbupdatelisteners")),addDataCreateListener:c(p("__kbdatacreatelisteners")),removeDataCreateListener:c(n("__kbdatacreatelisteners")),addDataRemoveListener:c(p("__kbdatadeletelisteners")),removeDataRemoveListener:c(n("__kbdatadeletelisteners"))});
return h}}(),F=function(){return function(C,t,x){function m(b,d,a,c,g,f){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=b;this.key=d;this.arguments=f;this.type=a;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=b.___kbImmediateParent;this.value=c;this.oldValue=g}function p(b){var d=this[b];return function(a,b){d[a]=b;return this}}function n(b){var d=this[b];return function(a,b){void 0!==
b&&(d=d[a]);for(var c=0,g=d.length;c<g;c++)if(d[c].toString()===b.toString()){d.splice(c,1);break}return this}}function v(b,d,a){return{get:function(){return b[d]},set:function(a){b[d]=a},enumerable:a.enumerable,configurable:a.configurable}}function c(b,d,a){return{value:b,writable:!!d,enumerable:!1,configurable:!!a}}function u(b,d){var a=b,c=b,g=y,f=A;return{get:function(){return a},set:function(b,q){!0!==g(this,d,"set",b,a)&&(c=a,a=b,f(this,d,"update",a,c),q||this.callSubscribers(d,a,c))},configurable:!0,
enumerable:!0}}var h={},g={add:[],set:[],remove:[]},f=function(b,d,a,c,f,k){b=new m(b,d,a,c,f,k);d=0;a=g[a];for(c=a.length;d!==c&&(a[d](b),!b._stopPropogration);d++);return b._preventDefault},k={},y=function(b,d,a,c,g){b=new m(b,d,a,c,g);h.onset(b);return b._preventDefault},A=function(b,d,a,c,g){b=new m(b,d,a,c,g);h.onupdate(b);return b._preventDefault};Object.defineProperties(h,{__kbname:c(C||"",!0,!0),__kbref:c(t?t.__kbref||t:h,!0,!0),__kbscopeString:c(x||"",!0,!0),__kbImmediateParent:c(t||null,
!0,!0),add:c(function(b,d){if(void 0===this[b]){var a=new m(this,b,"add",d,void 0);h.onadd(a);!0!==a._preventDefault&&(Object.defineProperty(this,b,u.call(this,d,b)),f(this,b,"add",d,void 0,arguments))}else console.error("Your attempting to add the property: ",b," that already exists on",this,"try using set or direct set instead");return this}),addPointer:c(function(b,d,a){var c=new m(this,a||d,"add",b[d],void 0);h.onadd(c);!0!==c._preventDefault&&(c=Object.getOwnPropertyDescriptor(b,d),Object.defineProperty(this,
a||d,v(b,d,c)),f(this,a||d,"add",b[d],void 0,arguments));return this}),prototype:c(function(b,d){void 0===this[b]?Object.defineProperty(this.__proto__,b,c(d,!0,!0)):console.error("Your attempting to add the your method with the prop: ",b," that already exists");return this}),set:c(function(b,d,a){if(void 0===this[b])this.add(d,b);else if(!0!==y(this,b,"set",d)){var c=this[b];void 0===Object.getOwnPropertyDescriptor(this,b).value?Object.getOwnPropertyDescriptor(this,b).set.call(this,d,a):Object.defineProperty(this,
b,u.call(this,d,b));f(this,b,"set",d,c,arguments)}return this}),remove:c(function(b){if(void 0===this[b])return console.error("Your attempting to remove the property: ",b," that does not exist on ",this),this;var d=new m(this,b,"remove",this[b],void 0);h.onremove(d);!0!==d._preventDefault&&(d=this[b],Object.defineProperty(this,b,{value:void 0,writable:!0,enumerable:!0,configurable:!0}),f(this,b,"remove",d,void 0,arguments));return this}),stringify:c(function(){var b=[];return JSON.stringify(this,
function(d,a){if("[object Array]"===Object.prototype.toString.call(a)||"object"===typeof a&&a&&"[object Object]"===String.prototype.toString.call(a)){if(-1!==b.indexOf(a))return;b.push(a)}return a})}),callSubscribers:c(function(b,d,a){if(void 0!==k[b]){d=new m(this,b,"subscriber",d,a);a=0;for(var c=k[b].length;a<c&&(k[b][a](d),!d._stopPropogration);a++);}return this}),subscribe:c(function(b,d){void 0===k[b]&&(k[b]=[]);k[b].push(d);return this}),unsubscribe:c(function(b,d){if(void 0!==k[b]){var a=
0,c=k[b].length;a:for(;a<c;a++)if(k[b][a].toString()===d.toString()){k[b].splice(a,1);break a}}return this}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbdatacreatelisteners:c([]),__kbdatadeletelisteners:c([]),addActionListener:c(function(b,d){-1!==Object.keys(g).indexOf(b)?g[b].push(d):console.error("There is no action listener by the name: ",b);return this}),removeActionListener:c(function(b,d){if(-1!==Object.keys(g).indexOf(b))for(var a=
0,c=g[b],f=c.length;a!==f;a++){if(c[a].toString()===d.toString()){c.splice(a,1);break}}else console.error("There is no action listener by the name: ",b);return this}),onadd:c(function(){},!0),onremove:c(function(){},!0),onset:c(function(){},!0),onupdate:c(function(){},!0)});Object.defineProperties(h,{addDataListener:c(p("__kblisteners")),removeDataListener:c(n("__kblisteners")),addDataUpdateListener:c(p("__kbupdatelisteners")),removeDataUpdateListener:c(n("__kbupdatelisteners")),addDataCreateListener:c(p("__kbdatacreatelisteners")),
removeDataCreateListener:c(n("__kbdatacreatelisteners")),addDataRemoveListener:c(p("__kbdatadeletelisteners")),removeDataRemoveListener:c(n("__kbdatadeletelisteners"))});return h}}(),B=function(C,t){function x(m){function p(c){return"[object Array]"===Object.prototype.toString.call(c)}function n(c){return"[object Object]"===Object.prototype.toString.call(c)}function v(c){return c.split(".").filter(function(c){return 0!==c.length})}function c(c){return function(f,k){function h(f,b,d){var a=Object.keys(f).filter(function(a){return n(f[a])||
p(f[a])});void 0===f[c][b]&&(f[c][b]=[]);f[c][b].push(d);for(var e=0;e<a;e++)h(a[e],b,d)}h(this,f,k);return this}}function u(c){return function(f,h){function m(f,b,d){var a=Object.keys(f).filter(function(a){return n(f[a])||p(f[a])}),e=0,h=f[c][b].length;a:for(;e<h;e++)if(f[c][b][e].toString()===d.toString()){f[c][b].splice(e,1);break a}for(e=0;e<a;e++)m(a[e],b,d)}m(this,f,h);return this}}var h={name:m};_data=t().addPointer(h,"name","__kbname");_data.prototype("updateName",function(c){"string"===typeof c&&
(h.name=c);return this}).prototype("isArray",p).prototype("isObject",n).prototype("isObservable",function(c,f){return void 0===Object.getOwnPropertyDescriptor(c,f).vaue}).prototype("updateName",function(c){"string"===typeof c&&(h.name=c);return this}).prototype("getScopeByScopeString",function(c){function f(h){c.splice(0,1);return 0===c.length?h:f(h[c[0]])}c=v(c);return 0!==c.length?f(_data[c[0]]):_data}).prototype("addChildDataListener",c("__kbparentlisteners")).prototype("removeChildDataListener",
u("__kbparentlisteners")).prototype("addChildDataUpdateListener",c("__kbparentupdatelisteners")).prototype("removeChildDataUpdateListener",u("__kbparentupdatelisteners"));return _data}function x(m){function p(a,b,c,d,e,f){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=a;this.key=b;this.arguments=f;this.type=c;this.name=a.__kbname;this.root=a.__kbref;this.scope=a.__kbscopeString;this.parent=a.___kbImmediateParent;this.value=
d;this.oldValue=e}function n(a){return"[object Array]"===Object.prototype.toString.call(a)}function v(a){return"[object Object]"===Object.prototype.toString.call(a)}function c(a){return a.split(".").filter(function(a){return 0!==a.length})}function u(b){function d(a){a=a[e[0]];e.splice(0,1);return 0!==e.length?d(a,e[0]):a}var e=c(b);return d(a)}function h(a,c,d){function f(a,c,d){c=v(d)?t(e,a,a.__kbscopeString+"."+c):C(e,a,a.__kbscopeString+"."+c);var q=Object.keys(d);0!==Object.keys(a.__kbparentlisteners).length&&
(c.__kbparentlisteners=a.__kbparentlisteners);0!==Object.keys(a.__kbparentupdatelisteners).length&&(c.__kbparentupdatelisteners=a.__kbparentupdatelisteners);Object.defineProperties(c,{addChildListener:b(y("__kbparentlisteners")),removeChildListener:b(A("__kbparentlisteners")),addChildUpdateListener:b(y("__kbparentupdatelisteners")),removeChildUpdateListener:b(A("__kbparentupdatelisteners"))});a=0;for(var l=void 0,r=q.length;a<r;a++){l=d[q[a]];if(v(l)||n(l))l=f(c,q[a],l);c.add(q[a],l)}return c}return f(a,
c,d)}function g(b,c){if(void 0===a[b]){var e=new p(a,b,"add",c,void 0);d.onadd(e);!0!==e._preventDefault&&(v(c)||n(c)?a.add(b,h(a,b,c)):a.add(b,c),x(a,b,"add",c,void 0,arguments))}else console.error("Your attempting to add the property: ",b," that already exists on",a,"try using set instead");return this}function f(a){var b=this[a];return function(a,c){b[a]=c;return this}}function k(a){var b=this[a];return function(a,c){void 0!==c&&(b=b[a]);for(var d=0,e=b.length;d<e;d++)if(b[d].toString()===c.toString()){b.splice(d,
1);break}return this}}function y(a){return function(b,c){function d(b,c,e){var f=Object.keys(b).filter(function(a){return v(b[a])||n(b[a])});void 0===b[a][c]&&(b[a][c]=[]);b[a][c].push(e);for(var l=0;l<f;l++)d(f[l],c,e)}d(this,b,c);return this}}function A(a){return function(b,c){function d(b,c,e){var f=Object.keys(b).filter(function(a){return v(b[a])||n(b[a])}),l=0,r=b[a][c].length;a:for(;l<r;l++)if(b[a][c][l].toString()===e.toString()){b[a][c].splice(l,1);break a}for(l=0;l<f;l++)d(f[l],c,e)}d(this,
b,c);return this}}function b(a,b){return{value:a,writable:!!b,enumerable:!1,configurable:!1}}function d(c,d){void 0!==d&&"string"===typeof d&&(e=d);if(void 0!==c){a=v(c)?t(e):n(c)?C(e):a;_dKeys=Object.keys(c);Object.defineProperties(a,{addChildListener:b(y("__kbparentlisteners")),removeChildListener:b(A("__kbparentlisteners")),addChildUpdateListener:b(y("__kbparentupdatelisteners")),removeChildUpdateListener:b(A("__kbparentupdatelisteners"))});for(var f=0,g=void 0,k=_dKeys.length;f<k;f++)g=c[_dKeys[f]],
isOBject(g)||n(g)?a.add(_dKeys[f],h(a,_dKeys[f],g)):a.add(_dKeys[f],g)}return this}var a=t(m),e=m,z={add:[],set:[],update:[],remove:[]},x=function(a,b,c,d,e,f){a=new p(a,b,c,d,e,f);b=0;c=z[c];for(d=c.length;b!==d&&(c[b](a),!a._stopPropogration);b++);return a._preventDefault},B={};Object.defineProperties(d,{onadd:b(function(){},!0),onremove:b(function(){},!0),onset:b(function(){},!0),onupdate:b(function(){},!0),data:b(function(){return a}),subscribe:b(function(b,d){var e=c(b);1!==e.length?u(b).subscribe(e[e.length-
1],d):a.subscribe(b,d);return this}),unsubscribe:b(function(b,d){var e=c(b);1!==e.length?u(b).unsubscribe(e[e.length-1],d):a.unsubscribe(b,d);return this}),callSubscribers:b(function(b,c,d){if(void 0!==B[b]){c=new p(a,b,"subscriber",c,d);d=0;for(var e=B[b].length;d<e&&(B[b][d](c),!c._stopPropogration);d++);}return this}),add:b(g),addPointer:b(function(b,c){var e=new p(a,c,"add",b[c],void 0);d.onadd(e);!0!==e._preventDefault&&(a.addPointer(b,c),x(a,c,"add",value,void 0,arguments));return this}),set:b(function(b,
c,e){if(void 0===a[b])g(b,c);else{var f=new p(a,b,"set",c,void 0);d.onset(f);!0!==f._preventDefault&&(a.set(b,c,e),x(a,b,"set",c,old,arguments))}return this}),remove:b(function(b){if(void 0===a[b])return console.error("Your attempting to remove the property: ",b," that does not exist on ",a),this;var c=new p(a,b,"remove",a[b],void 0);d.onremove(c);!0!==c._preventDefault&&a.remove(b);return this}),stringify:b(function(){return a.stringify()}),isObservable:b(function(a,b){return void 0===Object.getOwnPropertyDescriptor(a,
b).vaue}),isObject:b(v),isArray:b(n),addListener:b(f),removeListener:b(k),__kbname:b(e,!0),__kbref:b(a,!0),__kblisteners:b({}),__kbupdatelisteners:b({}),__kbparentlisteners:b({}),__kbparentupdatelisteners:b({}),__kbdatacreatelisteners:b([]),__kbdatadeletelisteners:b([]),addActionListener:b(addActionListener),removeActionListener:b(removeActionListener)});Object.defineProperties(_obj,{addDataListener:b(f("__kblisteners")),removeDataListener:b(k("__kblisteners")),addDataUpdateListener:b(f("__kbupdatelisteners")),
removeDataUpdateListener:b(k("__kbupdatelisteners")),addDataCreateListener:b(f("__kbdatacreatelisteners")),removeDataCreateListener:b(k("__kbdatacreatelisteners")),addDataRemoveListener:b(f("__kbdatadeletelisteners")),removeDataRemoveListener:b(k("__kbdatadeletelisteners"))});return d}return x}(E,F);define&&require?define([],function(){return B}):module&&(module.exports=B);return B})();
